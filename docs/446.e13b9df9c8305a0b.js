"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[446],{446:(R,p,a)=>{a.r(p),a.d(p,{ManageUsersModule:()=>P});var h=a(6895),m=a(4006),U=a(529),g=a(9299),t=a(4650),_=a(1433),C=a(7185),x=a(4859),f=a(9549),T=a(4144),c=a(671),d=a(4333),Z=a(3081);function A(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"users.num")," "))}function v(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const s=n.index;t.xp6(1),t.hij(" ",s+1," ")}}function b(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"users.name")," "))}function S(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.xp6(1),t.hij(" ",s.username," ")}}function y(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"users.email")," "))}function M(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.xp6(1),t.hij(" ",s.email," ")}}function Y(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"users.tasksAssigned")," "))}function k(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.xp6(1),t.hij(" ",s.assignedTasks," ")}}function N(e,n){1&e&&t._UZ(0,"th",21)}function D(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(s);const i=t.oxw(),r=i.$implicit,l=i.index,u=t.oxw();return t.KtG(u.changeUSerStatus(r.status,r._id,l))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"users.in-active")))}function J(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(s);const i=t.oxw(),r=i.$implicit,l=i.index,u=t.oxw();return t.KtG(u.changeUSerStatus(r.status,r._id,l))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"users.search")))}function j(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"td",20)(1,"button",22),t.NdJ("click",function(){const i=t.CHM(s),r=i.$implicit,l=i.index,u=t.oxw();return t.KtG(u.deleteUSer(r._id,l))}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,D,3,3,"button",23),t.YNc(5,J,3,3,"button",24),t.qZA()}if(2&e){const s=n.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"users.delete")),t.xp6(2),t.Q6J("ngIf","Active"==s.status),t.xp6(1),t.Q6J("ngIf","Active"!==s.status)}}function L(e,n){1&e&&t._UZ(0,"tr",27)}function w(e,n){1&e&&t._UZ(0,"tr",28)}const B=function(e,n){return{id:"tasks",itemsPerPage:10,currentPage:e,totalItems:n}},F=[{path:"",component:(()=>{class e{constructor(s,o){this.service=s,this.toastr=o,this.displayedColumns=["position","name","email","tasksAssigned","actions"],this.dataSource=[],this.page=1,this.filteration={page:this.page,limit:10},this.getDataFormSubject()}ngOnInit(){this.getUsers()}getUsers(){this.service.getAllUsers(this.filteration)}getDataFormSubject(){this.service.userData.subscribe(s=>{this.dataSource=s.data,this.totalItems=s.total})}search(s){this.filteration.name=s.value,clearTimeout(this.timeOutId),this.timeOutId=setTimeout(()=>{this.getUsers()},2e3)}deleteUSer(s,o){this.dataSource[o].assignedTasks>0?this.toastr.error("You Can`t Delete This User Until Finished Your Tasks"):this.service.deleteUser(s).subscribe(i=>{this.toastr.success("User Deleted Successfully","success"),this.page=1,this.getUsers()})}changeUSerStatus(s,o,i){const r={id:o,status:s};this.dataSource[i].assignedTasks>0?this.toastr.error("You Can`t Update This User Until Finished Your Tasks"):this.service.changeStatus(r).subscribe(l=>{this.toastr.success("User Status Updated Successfully","success"),this.page=1,this.getUsers()})}changePage(s){this.page=s,this.getUsers()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(_.f),t.Y36(C._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],decls:32,vars:15,consts:[[1,"mt-4"],[1,"row","mt-3"],[1,"col-md-3"],["appearance","outline",1,"w-100"],["matInput","",3,"placeholder","keyup"],[1,"listBox"],["mat-table","",1,"mat-elevation-z8","w-100","mt-2",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","tasksAssigned"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","justify-content-center"],["id","tasks",3,"pageChange"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"w-20"],["mat-raised-button","","color","warn",1,"mx-2",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,o){1&s&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("keyup",function(r){return o.search(r.target)}),t.ALo(9,"translate"),t.qZA()()()()(),t.TgZ(10,"div",5)(11,"table",6),t.ynx(12,7),t.YNc(13,A,3,3,"th",8),t.YNc(14,v,2,1,"td",9),t.BQk(),t.ynx(15,10),t.YNc(16,b,3,3,"th",8),t.YNc(17,S,2,1,"td",9),t.BQk(),t.ynx(18,11),t.YNc(19,y,3,3,"th",8),t.YNc(20,M,2,1,"td",9),t.BQk(),t.ynx(21,12),t.YNc(22,Y,3,3,"th",8),t.YNc(23,k,2,1,"td",9),t.BQk(),t.ynx(24,13),t.YNc(25,N,1,0,"th",14),t.YNc(26,j,6,5,"td",9),t.BQk(),t.YNc(27,L,1,0,"tr",15),t.YNc(28,w,1,0,"tr",16),t.ALo(29,"paginate"),t.qZA(),t.TgZ(30,"div",17)(31,"pagination-controls",18),t.NdJ("pageChange",function(r){return o.changePage(r)}),t.qZA()()()()),2&s&&(t.xp6(6),t.Oqu(t.lcZ(7,5,"users.search")),t.xp6(2),t.s9C("placeholder",t.lcZ(9,7,"users.titleSearch")),t.xp6(3),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.xi3(29,9,o.displayedColumns,t.WLB(12,B,o.page,o.totalItems))))},dependencies:[x.lW,f.KE,f.hX,T.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,m._Y,m.JL,m.F,d.LS,h.O5,d._s,Z.X$],styles:["[_nghost-%COMP%]     table thead{background-color:#bc1059!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.w-20[_ngcontent-%COMP%]{width:20%!important}  .ngx-pagination .current{margin:10px;background:#ca085a!important}"]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(F),g.Bz]}),e})();var I=a(4911),Q=a(9027);let P=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[I.q,m.u5,m.UX,O,U.JF,d.JX,h.ez,Q.m]}),e})()}}]);